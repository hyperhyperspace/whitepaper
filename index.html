<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">

	<title>Hyper Hyper Space</title>
	<meta name="description" content="The Hyper Hyper Space is a browser-based p2p framework for application interoperability">
	<meta name="author" content="Santiago Bazerque">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="cavepaint.css">
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
</head>

<body class="light white">

	<nav class="bar text-padding no-underlines inner-feature-width">
		<a href="https://www.hyperhyperspace.org"><img src="img/HHS_Logo_small.png" alt="Hyper Hyper Space" class="padding-left padding-top"></a>
	</nav>
	<div style="border-top: 1px solid; border-bottom: 1px solid;" class="bar inner-feature-width">
		<span class="padding monospace">White Paper</span>
	</div>
	<div class="inner-feature-width">
		<h2 style="border-bottom: 1px solid;" class="no-margin-bottom padding-left">Hyper Hyper Space</h2>
		<div class="two-column"><span class="monospace small  padding-left"> by <b>Santiago Bazerque</b></span><span class="text-right padding-right monospace small">21st September <b>2021</b><br>Draft</span></div>
	</div>

	<div class="inner-feature-width gutter-top" style="display:flex;">
		
		<div class="hide mobile no-padding-bottom" style="width: 25%;">
		</div>
		<div class="padding-left" style="flex-grow: 4;">
			<div class="page-width">
				<p>On the Internet, every ISP offers access to the entire network: the Internet Protocols enable 
				<i>universal connectivity</i>. This property does not hold, however, for the information stored 
				<i>within</i> each of the platforms and applications we use online. On the contrary, information
				can usually be accessed only through the system where it was created, limiting platform choice and 
				application interoperability. 
				</p>

				<p>Building upon the Internet's universal connectivity premise, the Hyper Hyper Space project
				proposes a framework for <i>universal information access</i>. Under the proposed model, applications
				don't use the client-server model, with the client using APIs to perform application functions, but a 
				fully distributed one, in which all applications use a standardized information representation
				based on immutable Merkle-DAGs. The framework provides building blocks
				for the creation of reusable open formats, from which secure distributed data structures can be
				derived. The end result simplifies the creation of peer-to-peer information systems and improves
				application interoperability.

				<p>To make these new distributed, interoperable applications universally available, a JavaScript 
				implementation of the Hyper Hyper Space protocol stack has been adapted to run inside a 
				modern web browser, using IndexedDB for persistence and WebRTC as transport. This enables a regular
				website to work as a web-based peer, creating a local database <b>inside</b> the browser that is then 
				synchronized automatically using a peer-to-peer network overlay.
				</p>

				<h4>Information as Merkle-DAGs</h4>

				<p>Just like the Internet Protocol uses a simplistic network definition (optimistic delivery 
				of discrete packages) to build its network interconnection capabilities, Hyper Hyper Space-based 
				applications use a single data structure to represent information: an <b>immutable, append-only 
				Merkle-DAG</b>. This is a generalization of the model used 
				by blockchain-based cryptocurrencies, but instead of storing financial transactions, each node in 
				the graph may contain an arbitrary application-defined JSON-like object. Objects reference each 
				other by using their cryptographic hashes, like blocks do in a blockchain, and are authenticated
				using cryptographic signatures. The resulting Merkle-DAG can be synchronized 
				accross devices and verified efficently. It forms the basis of Hyper Hyper Space's interoperability 
				capabilities.</p>

				<h5>Data Model</h5>

				<p>There is a significant mismatch between writing to an append-only immutable DAG and the 
				data structures an application designer may expect. In the Hyper Hyper Space data model, each
				object defined by the application is mapped into a JSON literal and hashed. The resulting 
				&lt;hash, literal&gt; pair is then appended to the application's DAG. While primitive data types are 
				mapped to JSON verbatim, refrences to other objects are transformed into <b>hash-based references</b> that form
				arcs in the graph:

				<div class="text-trim">
					<div class="dull white text-padding">
						<span class="monospace">
							let ken = new Identity('Ken', keypair);<br>
							<br>
							let m = new Message();<br>
							m.text = 'hello Mom'<br>
							m.timestamp = Date.now();<br>
							m.author = ken;<br>
						</span>
					</div>
				</div>

				<img class="padding" src="img/hello_mom.png">

				<p>When one an object is replicated from one peer to another, its references are identified and sent
				automatically. All objects are typed, and each application informs the set of datatypes that it will
				accept. Types come equipped with a validation function that will be used by the replication layer 
				to accept or reject received additions to the local copy of the DAG.
				</p>

				<h5>Mutability</h5>

				<p>Mutable objects are represented using <b>operation-based datatypes</b>. A mutable object is appended to
				the DAG in a definied initial state, and later changes are represented as mutation objects that
				reference it. Since when replicating a mutable object all the mutations must be replicated as well,
				both are labelled as such in the DAG.</p>
				
				<p>
				In the following example, the <span class="monospace">Message</span>
				object created above is inserted into a <span class="monospace">MutableSet</span>:
				</p>

				<div class="text-trim">
					<div class="dull white text-padding">
						<span class="monospace">
							let m = new Message();<br>
							...<br>
							let s = new MutableSet();<br>
							s.add(m);<br>
						</span>
					</div>
				</div>
				
				<img class="padding" src="img/save_op.png">
				
				
				<p>The created <span class="monospace">MutableSet</span> object, that initially represents an empty set,
				includes a random seed in its JSON-like representation. This makes its hash <span class="monospace light warm green">c111fa&mldr;</span>
				unique. Otherwise, the system would accept a <b>single</b> empty set object, like in the mathematical definition
				of set theory, where extensional equality makes all empty sets represent the same entity. As operations adding and removing elements from the set are later appended to the DAG, the hash 
				of the set object itself remains constant and can be safely used to create references in the rest of the model.
				Operations will usually also include a random nonce, like the <span class="monospace">AddOp</span> above, to
				make them unique. 	
				</p>

				<p>Operations also include a <span class="monospace">prev</span> field that references to the most 
				recent mutations that have been accepted in the local DAG. In the following example, a series of
				operations on an observed-remove set have been executed serially on a peer. The vertical arrows
				indicate the <span class="monospace">prev</span> relationship, while the <span class="monospace">DeleteOp</span>
				object has an additional blue arrow pointing to the additions that are being cancelled:
				</p>

				<img class="padding" src="img/mut_set.png">

				<p>When an object is modified concurrently by several peers, <span class="monospace">prev</span> doesn't
				guarantee that all operations will reach peers in the same order. Mutable datatypes need to	ensure 
				convergence, usually by employing commutative operations, following the techniques developed for CRDTs.
				Below we see how two peers, Ken and Mary, have concurrently added some elements to a set. Later on
				a synchronization occurs, and finally Ken adds a last element:</p>

				<img class="padding" src="img/mut_set_concurrent.png">

				<p>When comparing the state of a mutable object in two different replicas, the <span class="monospace">prev</span>
				relationship allows peers to quickly determine if both replicas have the same set of operations, if one replica
				supercedes the other, or if they are in divergent states, usually within a single round-trip.
				</p>

			</div>
		</div>
	</div>
	<div class="inner-feature-width gutter-top grid gap-border-width">
		<div class="grid-width-three hide mobile no-padding-bottom text-trim" style="border-top: 1px solid">
			<span class="small monospace"><a href="https://www.hyperhyperspace.org">Hyper Hyper Space</a> is a 
			novel <span class="base-color">information interoperability</span> technology stack that runs a full peer in any 
			<span class="red">unmodified modern browser</span>, creating a browser-to-browser mesh network and 
			solving the distribution problem for dapps.
			</span>
		</div>
		<div class="grid-width-nine padding-left">
			<div class="page-width">
				
				<h4>Spaces</h4>
			</div>
		</div>
		<div class="grid-width-three hide mobile text-trim" style="border-top: 1px solid">
			<span class="small monospace">Look up the space <span class="green">suburb suburb awake</span> in the  <a href="https://hyperhyper.space/chat-window" target="_blank">chat system example</a>
			to discuss this White Paper!
			</span>
		</div>
		<div class="grid-width-nine padding-left">
			<div class="page-width">

				<p>On the Internet, IP addresses are the network-independent identifiers that enable universal connectivity.
				Similarly, Hyper Hyper Space introduces an application-independent representation for information objects: <i>Spaces</i>.
				A space may contain a chat room, a discussion forum, an e-commerce store, a blog, etc.
				</p>

				<p>Spaces are universally accessible using <span style="border-bottom: 1px dotted" title="If the system gains popularity, we may need 4-word codes!">3-word codes</span>.
				When ownership and access restrictions are necessary, Spaces use Hyper Hyper Space native cryptographic identities, that can be exported from one application to another,
				to authenticate peers.
				</p>
				
				<p>As an example, here is a <a href="https://hyperhyper.space/chat-window" target="_blank">demo chat system</a> based on Hyper Hyper Space. Each
				chat room is a space, and has its own 3-word code. The page is static, and the contents of each chat room are synchronized between participants 
				browser-to-browser. If you copy the page and host it elsewhere (or locally on your own computer), everthing would work exactly the same.
				</p>

				<p>Websites may be used to look up spaces like in the example above. Spaces can also be <b>embedded using iFrames</b>, and a website may
				also pin down and load a fixed space, providing an experience similar to a <b>regular page</b>.
				</p>

				
			</div>
		</div>
		<div class="grid-width-three hide mobile text-trim" style="border-top: 1px solid">
			<span class="small monospace">Look up the space <span class="green">suburb suburb awake</span> in the  <a href="https://hyperhyper.space/chat-window" target="_blank">chat system example</a>
			to discuss this White Paper!
			</span>
		</div>
		<div class="grid-width-nine padding-left">
			<div class="page-width">


				
			</div>
		</div>
		<div class="grid-width-three hide mobile text-trim" style="border-top: 1px solid">
			<span class="small monospace">The <a href="https://www.hyperhyperspace.org">Hyper Hyper Space</a> protocols 
			apply the Internet's <span class="base-color">end-to-end principle</span> to the design of 
			<i>information systems</i>.
			</span>
		</div>
		<div class="grid-width-nine padding-left">
			<div class="page-width">

				
			</div>
		</div>
		<div class="grid-width-three hide mobile text-trim" style="border-top: 1px solid">
			<span class="small monospace">As peers communicate <span class="yellow">exclusively over the shared merkle-DAG</span>,
			many of the challenges of distributed computing are encapsulated.
			</span>
		</div>
		<div class="grid-width-nine padding-left">
			<div class="page-width">
				
				
			</div>
		</div>
		<div class="grid-width-three hide mobile text-trim" style="border-top: 1px solid">
			<span class="small monospace">Just like references to an object within a single computer can be created by taking its memory 
			address (say in the <i>C programming language</i> model), peers in a <i>space</i> can reference an object by using its <span class="base-color">hash</span>.
			</span>
		</div>
		<div class="grid-width-nine padding-left">
			<div class="page-width">


			</div>
		</div>
		<div class="grid-width-three hide mobile no-padding-bottom text-trim" style="border-top: 1px solid">
			<span class="small monospace"><a href="https://www.hyperhyperspace.org">Hyper Hyper Space</a> is the 
			first <span class="base-color">Web 3</span> technology that runs a full peer in any 
			<span class="red">unmodified modern browser</span>, solving the distribution problem for dapps.
			</span>
		</div>
		

	</div>



</body>
</html>